// Aula 11 - Records

> SET SERVEROUTPUT ON;

DECLARE
TYPE r_contatos_cliente_t
IS
  RECORD
  (
    nome_cliente clientes.nome%TYPE,
    primeiro_nome contatos.funcionario_nome%TYPE,
    sobrenome contatos.sobrenome%TYPE );
  r_contatos_cliente r_contatos_cliente_t;
BEGIN
  NULL;
END;

CREATE TABLE rec_teste  (
    col_id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    primeiro_nome VARCHAR2( 50 ) NOT NULL, 
    sobrenome VARCHAR2( 50 ) NOT NULL,
    primary key (col_id)
);

DECLARE
  r_pessoa rec_teste%ROWTYPE;

BEGIN
  -- atribuir valores ao registro de pessoa
  r_pessoa.col_id  := 1;
  r_pessoa.primeiro_nome := 'Cliente1';
  r_pessoa.sobrenome  := 'Sobrenome1';

  INSERT INTO rec_teste VALUES r_pessoa;
END;

DECLARE
  r_pessoa rec_teste%ROWTYPE;

BEGIN
  SELECT * INTO r_pessoa 
  FROM rec_teste 
  WHERE col_id = 1;

  r_pessoa.sobrenome  := 'Sobrenome2';

  UPDATE rec_teste
  SET ROW = r_pessoa
  WHERE col_id = r_pessoa.col_id;
END;

DECLARE
  TYPE endereco IS RECORD (
    logradouro VARCHAR2(255),
    cidade VARCHAR2(100),
    estado VARCHAR2(100),
    cep VARCHAR(10),
    pais VARCHAR2(100)
  );
  TYPE cliente IS RECORD(
      nome_cliente VARCHAR2(100),
      entrega endereco,
      cobranca endereco
  );
  r_cadastro_cliente cliente;
BEGIN

  r_cadastro_cliente.nome_cliente := 'Cliente Sobrenome';
  -- atribuir endereco
  r_cadastro_cliente.entrega.logradouro := 'Rua XPTO 1';
  r_cadastro_cliente.entrega.cidade := 'Cidade XPTO';
  r_cadastro_cliente.entrega.estado := 'SP';
  r_cadastro_cliente.entrega.cep := '12345';
  r_cadastro_cliente.entrega.pais := 'BR';
  -- endereço de cobrança é o mesmo que endereço de entrega
  r_cadastro_cliente.cobranca := r_cadastro_cliente.entrega;
END;
















